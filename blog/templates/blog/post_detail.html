<!-- templates/blog/post_detail.html -->
{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <article class="mb-5">
        <h1>{{ post.title }}</h1>
        <p class="text-muted">Author: {{ post.author.username }} | {{ post.created_at|date:"Y/m/d H:i" }}</p>
        <hr>
        <p>{{ post.content|linebreaks }}</p>
        <hr>
        <p class="text-muted">Views: {{ post.views }}</p>
        <p>Categories
            {% for category in post.categories.all %}
                <span class="badge bg-secondary">{{ category.name }}</span>
            {% endfor %}
        </p>
        <p>Tags
            {% for tag in post.tags.all %}
                <span class="badge bg-info text-dark">{{ tag.name }}</span>
            {% endfor %}
        </p>
    </article>

    <section>
        <h4>Comments</h4>
        {% for comment in post.comments.all %}
            {% if comment.approved %}
                <div class="border rounded p-3 mb-2">
                    <strong>{{ comment.author.username }}</strong>
                    <p>{{ comment.content }}</p>
                    <small class="text-muted">{{ comment.created_at|date:"Y/m/d H:i" }}</small>
                </div>
            {% endif %}
        {% empty %}
            <p>No comments yet!</p>
        {% endfor %}
    </section>
{% endblock %}
